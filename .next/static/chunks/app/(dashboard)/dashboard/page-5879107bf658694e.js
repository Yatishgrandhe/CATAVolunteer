(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{1541:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>u});var n=r(5155),s=r(2115),a=r(2643);let i=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,s.useState)(null),[l,o]=(0,s.useState)(!0),c=(0,a.U)();(0,s.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await c.auth.getSession();u(null!=(e=null==t?void 0:t.user)?e:null),o(!1)})();let{data:{subscription:e}}=c.auth.onAuthStateChange(async(e,t)=>{var r;u(null!=(r=null==t?void 0:t.user)?r:null),o(!1)});return()=>e.unsubscribe()},[c.auth]);let d=async()=>{await c.auth.signOut()};return(0,n.jsx)(i.Provider,{value:{user:r,loading:l,signOut:d},children:t})}function l(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2643:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var n=r(3254);function s(){let e="https://vxvqbcoragcfugfxmhvu.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ4dnFiY29yYWdjZnVnZnhtaHZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcxNTYzNTYsImV4cCI6MjA2MjczMjM1Nn0.CE1IvcJDoVG10XJHbmlnDkLtwbMWuN9wGZ1QyV4B-Q0";if(!e||!t)throw Error("Missing environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are required");return(0,n.createBrowserClient)(e,t)}},3635:(e,t,r)=>{Promise.resolve().then(r.bind(r,6879))},6879:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(5155),s=r(2115),a=r(5695),i=r(1541),u=r(2643),l=r(2900);function o(){let{user:e,loading:t}=(0,i.A)(),r=(0,a.useRouter)(),[o,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(!0),f=(0,u.U)();(0,s.useEffect)(()=>{if(!t&&!e)return void r.push("/");e&&v()},[e,t,r]);let v=async()=>{try{let{data:t,error:r}=await f.from("profiles").select("role").eq("id",null==e?void 0:e.id).single();r?(console.error("Error fetching user role:",r),c("student")):c((null==t?void 0:t.role)||"student")}catch(e){console.error("Error checking user role:",e),c("student")}finally{h(!1)}};return((0,s.useEffect)(()=>{o&&!d&&("admin"===o?r.push("/admin/dashboard"):r.push("/student/dashboard"))},[o,d,r]),t||d)?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:(0,n.jsxs)(l.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[(0,n.jsx)(l.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loading Dashboard"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Please wait while we set up your experience..."})]})}):null}}},e=>{e.O(0,[254,702,441,964,358],()=>e(e.s=3635)),_N_E=e.O()}]);
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yatis/Downloads/CATA%20Volunteer%20Central/src/app/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useAuth } from '@/lib/auth-context'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { motion } from 'framer-motion'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\nexport default function DashboardPage() {\r\n  const { user, loading } = useAuth()\r\n  const router = useRouter()\r\n  const [userRole, setUserRole] = useState<string | null>(null)\r\n  const [checkingRole, setCheckingRole] = useState(true)\r\n  const supabase = createClient()\r\n\r\n  useEffect(() => {\r\n    if (!loading && !user) {\r\n      router.push('/')\r\n      return\r\n    }\r\n\r\n    if (user) {\r\n      checkUserRole()\r\n    }\r\n  }, [user, loading, router])\r\n\r\n  const checkUserRole = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select('role')\r\n        .eq('id', user?.id)\r\n        .single()\r\n\r\n      if (error) {\r\n        console.error('Error fetching user role:', error)\r\n        // Default to student if role not found\r\n        setUserRole('student')\r\n      } else {\r\n        setUserRole(data?.role || 'student')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking user role:', error)\r\n      setUserRole('student')\r\n    } finally {\r\n      setCheckingRole(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (userRole && !checkingRole) {\r\n      if (userRole === 'admin') {\r\n        router.push('/admin/dashboard')\r\n      } else {\r\n        router.push('/student/dashboard')\r\n      }\r\n    }\r\n  }, [userRole, checkingRole, router])\r\n\r\n  if (loading || checkingRole) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center\">\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.8 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"text-center\"\r\n        >\r\n          <motion.div\r\n            animate={{ rotate: 360 }}\r\n            transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n            className=\"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full mx-auto mb-4\"\r\n          />\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Loading Dashboard</h2>\r\n          <p className=\"text-gray-600\">Please wait while we set up your experience...</p>\r\n        </motion.div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return null\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AASe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,WAAW,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD;IAE5B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,WAAW,CAAC,MAAM;YACrB,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,MAAM;YACR;QACF;IACF,GAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,QACP,EAAE,CAAC,MAAM,MAAM,IACf,MAAM;YAET,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,uCAAuC;gBACvC,YAAY;YACd,OAAO;gBACL,YAAY,MAAM,QAAQ;YAC5B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,YAAY;QACd,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,YAAY,CAAC,cAAc;YAC7B,IAAI,aAAa,SAAS;gBACxB,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF;IACF,GAAG;QAAC;QAAU;QAAc;KAAO;IAEnC,IAAI,WAAW,cAAc;QAC3B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAI;gBAClC,SAAS;oBAAE,SAAS;oBAAG,OAAO;gBAAE;gBAChC,WAAU;;kCAEV,8OAAC,0LAAA,CAAA,SAAM,CAAC,GAAG;wBACT,SAAS;4BAAE,QAAQ;wBAAI;wBACvB,YAAY;4BAAE,UAAU;4BAAG,QAAQ;4BAAU,MAAM;wBAAS;wBAC5D,WAAU;;;;;;kCAEZ,8OAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;IAIrC;IAEA,OAAO;AACT","debugId":null}}]
}